{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dekel\\\\Desktop\\\\Trellor\\\\Sprint4\\\\frontend\\\\src\\\\cmps\\\\task-details.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport { DynamicCmp } from './dynamic-cmp'; //icons//\n\nimport { ReactComponent as CalenderIcon } from '../assets/img/calender-details.svg';\nimport { ReactComponent as CloseDetailsModal } from '../assets/img/close-task-form.svg';\nimport { ReactComponent as MembersIcon } from '../assets/img/members-icon.svg';\nimport { ReactComponent as LabelsIcon } from '../assets/img/labels-icon.svg';\nimport { ReactComponent as ChecklistIcon } from '../assets/img/checklist-icon.svg';\nimport { ReactComponent as DatesIcon } from '../assets/img/dates-icon.svg';\nimport { ReactComponent as AttachmentIcon } from '../assets/img/attachment-icon.svg';\nimport { ReactComponent as CoverIcon } from '../assets/img/cover-icon.svg';\nimport { ReactComponent as ArchiveIcon } from '../assets/img/archive-icon.svg';\nimport { ReactComponent as DescriptionIcon } from '../assets/img/description-icon.svg';\nimport { ReactComponent as ActivityIcon } from '../assets/img/activity-icon.svg';\nimport { ReactComponent as AttachmentBigIcon } from '../assets/img/attachmaent-iconbig.svg';\nimport { removeTask, saveTask } from '../store/board.actions';\nimport { boardService } from '../services/board.service';\nimport { AttachmentDetails } from './task-details/attachmaent-details';\nimport { TaskChecklist } from './task-details/task-checklist';\nimport { utilService } from '../services/util.service';\nimport { LoaderSkyllo } from './loader-cmp';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function TaskDetails() {\n  _s();\n\n  var _initTask$cover, _initTask$cover2, _initTask$cover3;\n\n  const params = useParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const board = useSelector(state => state.boardModule.board);\n  const user = useSelector(state => state.userModule.user);\n  const groupId = params.groupId;\n  const taskId = params.taskId;\n  const group = board.groups.find(group => group.id === groupId);\n  const initTask = group.tasks.find(task => task.id === taskId); // ELDAD\n\n  const bgColor = (_initTask$cover = initTask.cover) !== null && _initTask$cover !== void 0 && _initTask$cover.color ? initTask.cover.color.length > 9 ? ' #80837f' : initTask.cover.color : '';\n  let backgroundStyle = (bgColor === null || bgColor === void 0 ? void 0 : bgColor.length) > 9 ? 'backgroundImage' : 'backgroundColor';\n  const [isDescription, setIsDescription] = useState(false);\n  const [isChecklist, setIsChecklist] = useState(false);\n  const [dynamicType, setDynamicType] = useState('');\n  const [mouseLocation, setMouseLocation] = useState(null);\n  const [task, setTask] = useState(JSON.parse(JSON.stringify(initTask)));\n  const [taskLabels, setTaskLabels] = useState(null);\n  const [taskMembers, setTaskMembers] = useState(null);\n\n  const loadLabels = () => {\n    if (!task) return;\n    const labelIds = task.labelIds;\n    const taskLabel = labelIds === null || labelIds === void 0 ? void 0 : labelIds.map(id => {\n      return boardService.getLabelsById(board, id);\n    });\n    return setTaskLabels(taskLabel);\n  };\n\n  const loadMembers = () => {\n    if (!task) return;\n    const membersIds = task.memberIds;\n    const taskMembers = membersIds === null || membersIds === void 0 ? void 0 : membersIds.map(id => {\n      return boardService.getMembersById(board, id);\n    });\n    return setTaskMembers(taskMembers);\n  };\n\n  useEffect(() => {\n    setTimeout(() => {\n      loadLabels();\n    }, 500);\n    onSaveTask();\n    loadMembers();\n  }, [task]);\n\n  const onSaveTask = () => {\n    dispatch(saveTask(board._id, group.id, task, {\n      text: 'saved task',\n      taskTilte: task.title,\n      taskId: task.id,\n      groupId: group.id,\n      user: user\n    }));\n    if (isDescription) setIsDescription(false);\n  };\n\n  const onRemoveTask = ev => {\n    ev.preventDefault();\n    setIsDescription(false);\n    dispatch(removeTask(board._id, group.id, task.id, {\n      text: 'deleted task',\n      taskTilte: task.title,\n      taskId: task.id,\n      groupId: group.id,\n      user: user\n    }));\n    navigate(-1);\n  };\n\n  const onRemoveChecklist = (ev, checklistId) => {\n    ev.preventDefault();\n    const checklistsToUpdate = task.checklists.filter(checklist => checklist.id !== checklistId);\n    const taskToUpdate = { ...task,\n      checklists: checklistsToUpdate\n    };\n    setTask(taskToUpdate);\n  };\n\n  const handleChange = ({\n    target\n  }) => {\n    const field = target.name;\n    const value = target.type === 'number' ? +target.value || '' : target.value;\n    setTask(prevTask => ({ ...prevTask,\n      [field]: value\n    }));\n  };\n\n  const getMemberBackground = member => {\n    if (member.img) return `url(${member.img}) center center / cover`;else return `https://res.cloudinary.com/skello-dev-learning/image/upload/v1643564751/dl6faof1ecyjnfnknkla.svg) center center / cover;`;\n  };\n\n  const onOpenDynamicCmp = ev => {\n    const mouseClickLocation = ev.target.getClientRects();\n    setMouseLocation(mouseClickLocation[0].y);\n    setDynamicType(ev.target.name);\n    console.log('mouseLocation:', mouseLocation);\n  };\n\n  const onHoverLabel = (ev, color) => {\n    ev.target.style.background = utilService.lightenDarkenColor(color, -10);\n  };\n\n  const onLeaveHoverLabel = (ev, color) => {\n    ev.target.style.background = color;\n  };\n\n  const isOverDue = date => {\n    if (date < Date.now()) return 'overdue';\n    return 'ontime';\n  };\n\n  if (!task) return /*#__PURE__*/_jsxDEV(LoaderSkyllo, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"task-details-view\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"task-details-modal\",\n      children: [bgColor && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundColor: bgColor\n        },\n        className: \"details-bgColor\",\n        children: [((_initTask$cover2 = initTask.cover) === null || _initTask$cover2 === void 0 ? void 0 : _initTask$cover2.color.length) > 9 && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: (_initTask$cover3 = initTask.cover) === null || _initTask$cover3 === void 0 ? void 0 : _initTask$cover3.color\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 48\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"side-bar-action-btn-inCover\",\n          onClick: () => setDynamicType('cover'),\n          children: [/*#__PURE__*/_jsxDEV(CoverIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this), \" Cover\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: `/workspace/board/${board._id}`,\n        children: /*#__PURE__*/_jsxDEV(CloseDetailsModal, {\n          className: \"close-details-modal-icon\",\n          onClick: () => onSaveTask(task)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)\n      }, board._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"details-header\",\n        children: [/*#__PURE__*/_jsxDEV(CalenderIcon, {\n          className: \"calender-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          onChange: handleChange,\n          name: \"title\",\n          id: \"details-title\",\n          value: task.title,\n          children: task.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"details-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"details-main-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"first-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"members-labels-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"actions-type\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Members\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"action-type-content members-details-content\",\n                  children: [taskMembers && taskMembers.map(member => {\n                    {\n                      return member.img ? /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"task-details-member-box\",\n                        style: {\n                          background: getMemberBackground(member)\n                        }\n                      }, member._id, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 167,\n                        columnNumber: 45\n                      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"avatar-img-guest-member-box\"\n                      }, member._id, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 168,\n                        columnNumber: 27\n                      }, this);\n                    }\n                  }), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"task-details-member-box-plus-member\",\n                    onClick: () => setDynamicType('members'),\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"actions-type\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: \"Labels\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"action-type-content\",\n                  children: [taskLabels && taskLabels.map(label => {\n                    return /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"task-details-label-box\",\n                      onMouseEnter: ev => onHoverLabel(ev, label.color),\n                      onMouseLeave: ev => onLeaveHoverLabel(ev, label.color),\n                      style: {\n                        backgroundColor: label.color\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"labels-details-mini-color\",\n                        style: {\n                          backgroundColor: utilService.lightenDarkenColor(label.color, -20)\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 25\n                      }, this), label.title ? label.title : '']\n                    }, label.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 179,\n                      columnNumber: 30\n                    }, this);\n                  }), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"task-details-label-box-plus-label\",\n                    onClick: () => setDynamicType('labels'),\n                    children: \"+\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 187,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 15\n            }, this), task.dueDate && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"actions-type\",\n              onClick: () => setDynamicType('dates'),\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Due date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"action-type-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"due-date-checkbox\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"task-details-date-container\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: task.dueDate.dateToDisplay\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 20\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: task.dueDate.date < Date.now() ? 'overdue' : 'ontime',\n                    children: isOverDue(task.dueDate.date)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 200,\n                    columnNumber: 20\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"description-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container-title\",\n              children: [/*#__PURE__*/_jsxDEV(DescriptionIcon, {\n                className: \"title-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              style: {\n                backgroundColor: task.description ? 'inherit' : '#091e420a'\n              },\n              onChange: handleChange,\n              onClick: () => setIsDescription(true),\n              name: \"description\",\n              id: \"description-textarea-basic\",\n              value: task.description ? task.description : ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), isDescription && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"description-edit\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"save-description\",\n                onMouseDown: onSaveTask,\n                children: \"Save\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"close-description\",\n                onClick: () => setIsDescription(false),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), task.attachments && /*#__PURE__*/_jsxDEV(AttachmentDetails, {\n            setTask: setTask,\n            task: initTask\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 34\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"activity-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"container-title\",\n              children: [/*#__PURE__*/_jsxDEV(ActivityIcon, {\n                className: \"title-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n                children: \"Activity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"\",\n              id: \"activity-textarea\",\n              placeholder: \"Comment..\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this), task.checklists && task.checklists.map(checklist => {\n            return /*#__PURE__*/_jsxDEV(TaskChecklist, {\n              task: task,\n              initChecklist: checklist,\n              setTask: setTask,\n              checklistId: checklist.id,\n              board: board,\n              onRemoveChecklist: onRemoveChecklist\n            }, checklist.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 24\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"details-side-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"details-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Add to task\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"details-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"side-bar-action-btn\",\n                name: \"members\",\n                onClick: onOpenDynamicCmp,\n                children: [/*#__PURE__*/_jsxDEV(MembersIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 19\n                }, this), \" Members\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"side-bar-action-btn\",\n                name: \"labels\",\n                onClick: onOpenDynamicCmp,\n                children: [/*#__PURE__*/_jsxDEV(LabelsIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 19\n                }, this), \" Labels\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"side-bar-action-btn\",\n                name: \"checklist\",\n                onClick: onOpenDynamicCmp,\n                children: [/*#__PURE__*/_jsxDEV(ChecklistIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this), \" Checklist\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"details-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"side-bar-action-btn\",\n                name: \"dates\",\n                onClick: onOpenDynamicCmp,\n                children: [/*#__PURE__*/_jsxDEV(DatesIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 274,\n                  columnNumber: 19\n                }, this), \" Dates\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"side-bar-action-btn\",\n                name: \"attachment\",\n                onClick: onOpenDynamicCmp,\n                children: [/*#__PURE__*/_jsxDEV(AttachmentIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 19\n                }, this), \" Attachment\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"side-bar-action-btn\",\n                name: \"cover\",\n                onClick: onOpenDynamicCmp,\n                children: [/*#__PURE__*/_jsxDEV(CoverIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 19\n                }, this), \" Cover\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"details-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onRemoveTask,\n              children: [/*#__PURE__*/_jsxDEV(ArchiveIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 17\n              }, this), \" Archive\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this), dynamicType && /*#__PURE__*/_jsxDEV(DynamicCmp, {\n            mouseLocation: mouseLocation,\n            task: task,\n            setTask: setTask,\n            type: dynamicType,\n            setDynamicType: setDynamicType,\n            group: group,\n            setIsChecklist: setIsChecklist,\n            board: board\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n}\n\n_s(TaskDetails, \"5sO9Rd/Zf/5K2Rzp1GMItVgHwfk=\", false, function () {\n  return [useParams, useNavigate, useDispatch, useSelector, useSelector];\n});\n\n_c = TaskDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"TaskDetails\");","map":{"version":3,"sources":["C:/Users/Dekel/Desktop/Trellor/Sprint4/frontend/src/cmps/task-details.jsx"],"names":["useState","useEffect","useSelector","useDispatch","Link","useNavigate","useParams","DynamicCmp","ReactComponent","CalenderIcon","CloseDetailsModal","MembersIcon","LabelsIcon","ChecklistIcon","DatesIcon","AttachmentIcon","CoverIcon","ArchiveIcon","DescriptionIcon","ActivityIcon","AttachmentBigIcon","removeTask","saveTask","boardService","AttachmentDetails","TaskChecklist","utilService","LoaderSkyllo","TaskDetails","params","navigate","dispatch","board","state","boardModule","user","userModule","groupId","taskId","group","groups","find","id","initTask","tasks","task","bgColor","cover","color","length","backgroundStyle","isDescription","setIsDescription","isChecklist","setIsChecklist","dynamicType","setDynamicType","mouseLocation","setMouseLocation","setTask","JSON","parse","stringify","taskLabels","setTaskLabels","taskMembers","setTaskMembers","loadLabels","labelIds","taskLabel","map","getLabelsById","loadMembers","membersIds","memberIds","getMembersById","setTimeout","onSaveTask","_id","text","taskTilte","title","onRemoveTask","ev","preventDefault","onRemoveChecklist","checklistId","checklistsToUpdate","checklists","filter","checklist","taskToUpdate","handleChange","target","field","name","value","type","prevTask","getMemberBackground","member","img","onOpenDynamicCmp","mouseClickLocation","getClientRects","y","console","log","onHoverLabel","style","background","lightenDarkenColor","onLeaveHoverLabel","isOverDue","date","Date","now","backgroundColor","label","dueDate","dateToDisplay","description","attachments"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { Link, useNavigate, useParams } from 'react-router-dom'\r\nimport { DynamicCmp } from './dynamic-cmp'\r\n\r\n//icons//\r\nimport { ReactComponent as CalenderIcon } from '../assets/img/calender-details.svg'\r\nimport { ReactComponent as CloseDetailsModal } from '../assets/img/close-task-form.svg'\r\nimport { ReactComponent as MembersIcon } from '../assets/img/members-icon.svg'\r\nimport { ReactComponent as LabelsIcon } from '../assets/img/labels-icon.svg'\r\nimport { ReactComponent as ChecklistIcon } from '../assets/img/checklist-icon.svg'\r\nimport { ReactComponent as DatesIcon } from '../assets/img/dates-icon.svg'\r\nimport { ReactComponent as AttachmentIcon } from '../assets/img/attachment-icon.svg'\r\nimport { ReactComponent as CoverIcon } from '../assets/img/cover-icon.svg'\r\nimport { ReactComponent as ArchiveIcon } from '../assets/img/archive-icon.svg'\r\nimport { ReactComponent as DescriptionIcon } from '../assets/img/description-icon.svg'\r\nimport { ReactComponent as ActivityIcon } from '../assets/img/activity-icon.svg'\r\nimport { ReactComponent as AttachmentBigIcon } from '../assets/img/attachmaent-iconbig.svg'\r\nimport { removeTask, saveTask } from '../store/board.actions'\r\nimport { boardService } from '../services/board.service'\r\nimport { AttachmentDetails } from './task-details/attachmaent-details'\r\nimport { TaskChecklist } from './task-details/task-checklist'\r\nimport { utilService } from '../services/util.service'\r\nimport { LoaderSkyllo } from './loader-cmp'\r\n\r\n\r\nexport function TaskDetails() {\r\n  const params = useParams()\r\n  const navigate = useNavigate()\r\n  const dispatch = useDispatch()\r\n  const board = useSelector(state => state.boardModule.board)\r\n  const user = useSelector(state => state.userModule.user)\r\n\r\n  const groupId = params.groupId\r\n  const taskId = params.taskId\r\n  const group = board.groups.find(group => group.id === groupId)\r\n  const initTask = group.tasks.find(task => task.id === taskId)\r\n  // ELDAD\r\n  const bgColor = initTask.cover?.color ? initTask.cover.color.length > 9 ? ' #80837f' : initTask.cover.color : ''\r\n\r\n  let backgroundStyle = bgColor?.length > 9 ? 'backgroundImage' : 'backgroundColor'\r\n\r\n  const [isDescription, setIsDescription] = useState(false)\r\n  const [isChecklist, setIsChecklist] = useState(false)\r\n  const [dynamicType, setDynamicType] = useState('')\r\n  const [mouseLocation, setMouseLocation] = useState(null)\r\n\r\n  const [task, setTask] = useState(JSON.parse(JSON.stringify(initTask)))\r\n  const [taskLabels, setTaskLabels] = useState(null)\r\n  const [taskMembers, setTaskMembers] = useState(null)\r\n\r\n  const loadLabels = () => {\r\n    if (!task) return\r\n    const labelIds = task.labelIds\r\n    const taskLabel = labelIds?.map(id => {\r\n      return boardService.getLabelsById(board, id)\r\n    })\r\n    return setTaskLabels(taskLabel)\r\n  }\r\n\r\n  const loadMembers = () => {\r\n    if (!task) return\r\n    const membersIds = task.memberIds\r\n    const taskMembers = membersIds?.map(id => {\r\n      return boardService.getMembersById(board, id)\r\n    })\r\n    return setTaskMembers(taskMembers)\r\n  }\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      loadLabels()\r\n    }, 500)\r\n\r\n    onSaveTask()\r\n    loadMembers()\r\n  }, [task])\r\n\r\n  const onSaveTask = () => {\r\n    dispatch(saveTask(board._id, group.id, task, { text: 'saved task', taskTilte: task.title, taskId: task.id,groupId:group.id, user: user }))\r\n    if (isDescription) setIsDescription(false)\r\n  }\r\n\r\n  const onRemoveTask = (ev) => {\r\n    ev.preventDefault()\r\n    setIsDescription(false)\r\n    dispatch(removeTask(board._id, group.id, task.id, { text: 'deleted task', taskTilte: task.title, taskId: task.id,groupId:group.id, user: user }))\r\n    navigate(-1)\r\n  }\r\n\r\n  const onRemoveChecklist = (ev, checklistId) => {\r\n    ev.preventDefault()\r\n    const checklistsToUpdate = task.checklists.filter(checklist => checklist.id !== checklistId)\r\n    const taskToUpdate = { ...task, checklists: checklistsToUpdate }\r\n    setTask(taskToUpdate)\r\n  }\r\n\r\n  const handleChange = ({ target }) => {\r\n    const field = target.name\r\n    const value = target.type === 'number' ? (+target.value || '') : target.value\r\n    setTask(prevTask => ({ ...prevTask, [field]: value }))\r\n  }\r\n\r\n  const getMemberBackground = (member) => {\r\n    if (member.img) return `url(${member.img}) center center / cover`\r\n    else return `https://res.cloudinary.com/skello-dev-learning/image/upload/v1643564751/dl6faof1ecyjnfnknkla.svg) center center / cover;`\r\n  }\r\n\r\n  const onOpenDynamicCmp = (ev) => {\r\n    const mouseClickLocation = ev.target.getClientRects()\r\n    setMouseLocation(mouseClickLocation[0].y)\r\n    setDynamicType(ev.target.name)\r\n    console.log('mouseLocation:', mouseLocation)\r\n  }\r\n\r\n  const onHoverLabel = (ev, color) => {\r\n    ev.target.style.background = utilService.lightenDarkenColor(color, -10);\r\n  }\r\n\r\n  const onLeaveHoverLabel = (ev, color) => {\r\n    ev.target.style.background = color\r\n  }\r\n\r\n  const isOverDue = (date) => {\r\n    if(date < Date.now()) return 'overdue'\r\n    return 'ontime' \r\n  }\r\n\r\n\r\n  if (!task) return <LoaderSkyllo />\r\n  return (\r\n    <section className='task-details-view'>\r\n      <div className='task-details-modal'>\r\n        {bgColor && <div style={{ backgroundColor: bgColor }} className='details-bgColor'>\r\n          {initTask.cover?.color.length > 9 && <img src={initTask.cover?.color} />}\r\n          <button className='side-bar-action-btn-inCover' onClick={() => setDynamicType('cover')}>\r\n            <CoverIcon /> Cover\r\n          </button>\r\n        </div>}\r\n        <Link key={board._id} to={`/workspace/board/${board._id}`}>\r\n          <CloseDetailsModal\r\n            className='close-details-modal-icon'\r\n            onClick={() => onSaveTask(task)} />\r\n        </Link>\r\n\r\n        <section className='details-header'>\r\n          <CalenderIcon className='calender-icon' />\r\n          {/* <textarea onChange={(ev) => setDescription(ev.target.value)} */}\r\n          <textarea onChange={handleChange}\r\n            name='title'\r\n            id='details-title'\r\n            value={task.title}\r\n          >\r\n            {task.title}\r\n          </textarea>\r\n        </section>\r\n        <section className='details-content'>\r\n          <section className='details-main-content'>\r\n            <section className='first-content'>\r\n              <div className='members-labels-content'>\r\n\r\n                <div className='actions-type'>\r\n                  <h4>Members</h4>\r\n                  <div className='action-type-content members-details-content'>\r\n                    {taskMembers && taskMembers.map(member => {\r\n                      {\r\n                        return member.img ? <div className='task-details-member-box' key={member._id} style={{ background: getMemberBackground(member) }}></div> :\r\n                          <div key={member._id} className='avatar-img-guest-member-box'></div>\r\n                      }\r\n                    })}\r\n                    <div className='task-details-member-box-plus-member' onClick={() => setDynamicType('members')}>+</div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className='actions-type'>\r\n                  <h4>Labels</h4>\r\n                  <div className='action-type-content'>\r\n                    {taskLabels && taskLabels.map(label => {\r\n                      return <div key={label.id} className='task-details-label-box'\r\n                        onMouseEnter={(ev) => onHoverLabel(ev, label.color)}\r\n                        onMouseLeave={(ev) => onLeaveHoverLabel(ev, label.color)}\r\n                        style={{ backgroundColor: label.color }}>\r\n                        <div className='labels-details-mini-color' style={{ backgroundColor: utilService.lightenDarkenColor(label.color, -20) }}></div>\r\n                        {label.title ? label.title : ''}\r\n                      </div>\r\n                    })}\r\n                    <div className='task-details-label-box-plus-label' onClick={() => setDynamicType('labels')}>+</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n              {task.dueDate &&\r\n              <div className='actions-type' onClick={() => setDynamicType('dates')}>\r\n                <h4>Due date</h4>\r\n                <div className='action-type-content'>\r\n                  <div className='due-date-checkbox'></div>\r\n                  <div className='task-details-date-container'>\r\n                   <p>{task.dueDate.dateToDisplay}</p>\r\n                   <div className={task.dueDate.date < Date.now()? 'overdue' : 'ontime'}>{isOverDue(task.dueDate.date)}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              }\r\n\r\n            </section>\r\n\r\n            <div className='description-container'>\r\n              <div className='container-title'>\r\n                <DescriptionIcon className='title-icon' />\r\n                <h5>Description</h5>\r\n              </div>\r\n              <textarea\r\n                style={{ backgroundColor: task.description ? 'inherit' : '#091e420a' }}\r\n                onChange={handleChange}\r\n                onClick={() => setIsDescription(true)}\r\n                name='description'\r\n                id='description-textarea-basic'\r\n                value={task.description ? task.description : ''}\r\n              ></textarea>\r\n              {isDescription &&\r\n                <div className='description-edit'>\r\n                  <button className='save-description' onMouseDown={onSaveTask}>Save</button>\r\n                  <button className='close-description' onClick={() => setIsDescription(false)}>Cancel</button>\r\n                </div>}\r\n            </div>\r\n            {task.attachments && <AttachmentDetails setTask={setTask} task={initTask} />}\r\n\r\n            <div className='activity-container'>\r\n              <div className='container-title'>\r\n                <ActivityIcon className='title-icon' />\r\n                <h5>Activity</h5>\r\n              </div>\r\n              <textarea\r\n                name=''\r\n                id='activity-textarea'\r\n                placeholder='Comment..'\r\n              ></textarea>\r\n            </div>\r\n\r\n            {task.checklists &&\r\n              task.checklists.map((checklist) => {\r\n                return <TaskChecklist\r\n                  key={checklist.id}\r\n                  task={task}\r\n                  initChecklist={checklist}\r\n                  setTask={setTask}\r\n                  checklistId={checklist.id}\r\n                  board={board}\r\n                  onRemoveChecklist={onRemoveChecklist}\r\n\r\n                />\r\n              }\r\n              )}\r\n          </section>\r\n\r\n          {/*details side-bar: */}\r\n          <section className='details-side-actions'>\r\n            <div className='details-actions'>\r\n              <h5>Add to task</h5>\r\n              <div className='details-actions'>\r\n                <button className='side-bar-action-btn' name='members' onClick={onOpenDynamicCmp} >\r\n                  <MembersIcon /> Members\r\n                </button>\r\n                <button className='side-bar-action-btn' name='labels' onClick={onOpenDynamicCmp}>\r\n                  <LabelsIcon /> Labels\r\n                </button>\r\n                <button className='side-bar-action-btn' name='checklist' onClick={onOpenDynamicCmp}>\r\n                  <ChecklistIcon /> Checklist\r\n                </button>\r\n              </div>\r\n              <div className='details-actions'>\r\n                <button className='side-bar-action-btn' name='dates' onClick={onOpenDynamicCmp}>\r\n                  <DatesIcon /> Dates\r\n                </button>\r\n                <button className='side-bar-action-btn' name='attachment' onClick={onOpenDynamicCmp}>\r\n                  <AttachmentIcon /> Attachment\r\n                </button>\r\n                <button className='side-bar-action-btn' name='cover' onClick={onOpenDynamicCmp}>\r\n                  <CoverIcon /> Cover\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className='details-actions'>\r\n              <h5>Actions</h5>\r\n              <button onClick={onRemoveTask}>\r\n                <ArchiveIcon /> Archive\r\n              </button>\r\n            </div>\r\n            {dynamicType &&\r\n              <DynamicCmp\r\n                mouseLocation={mouseLocation}\r\n                task={task}\r\n                setTask={setTask}\r\n                type={dynamicType}\r\n                setDynamicType={setDynamicType}\r\n                group={group}\r\n                setIsChecklist={setIsChecklist}\r\n                board={board}\r\n              />\r\n\r\n            }\r\n          </section>\r\n        </section>\r\n      </div>\r\n    </section>\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}